<%- include('../partials/header') %>
<h1>Flight Details</h1>
<div>
  <p>Airline: <%= flight.airline %></p>
  <p>Flight No.: <%= flight.flightNo %></p>
  <p>Departure Airport: <%= flight.airport %></p>
  <p>Departure Date/Time: <%= flight.departs.toLocaleString() %></p>
</div>

<hr>
<h2>Tickets</h2>
<a href="/flights/<%= flight._id %>/tickets/new">Add Ticket</a>
<ul>
  <% tickets.forEach(ticket => { %>
    <li>Seat: <%= ticket.seat %>, Price: <%= ticket.price %></li>
  <% }); %>
</ul>
<hr>

<hr>
<% if (flight.destinations && flight.destinations.length > 0) { %>
    <h3>Destination</h3>
    <ul>
      <% flight.destinations.forEach(destination => { %>
        <li>Airport: <%= destination.airport %>, Arrival: <%= destination.arrival.toLocaleString() %></li>
      <% }); %>
    </ul>
  <% } %>  
<hr>

<h4>Add Destination</h4>
<form action="/flights/<%= flight._id %>/destinations" method="post">
  <div>
    <label for="airport">Airport:</label>
    <select name="airport">
      <option value="AUS">Austin (AUS)</option>
    </select>
  </div>
  <div>
    <label for="arrival">Arrival Date/Time:</label>
    <input type="datetime-local" name="arrival">
  </div>
  <div>
    <button type="submit">Add Destination</button>
  </div>
</form>
<%- include('../partials/footer') %>